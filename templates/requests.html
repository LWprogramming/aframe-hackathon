<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title>text</title>
    <script src="https://aframe.io/releases/1.0.4/aframe.min.js"></script>
    <script src="https://unpkg.com/aframe-text-geometry-component@^0.5.0/dist/aframe-text-geometry-component.min.js"></script>
    <script src="https://unpkg.com/aframe-look-at-component@0.8.0/dist/aframe-look-at-component.min.js"></script>
    <script src="https://rawgit.com/feiss/aframe-environment-component/master/dist/aframe-environment-component.min.js"></script>
    <script type="text/javascript">
      /* jshint esversion: 6 */
      AFRAME.registerComponent('request-response', {
        init: function () {
          const Http = new XMLHttpRequest();
          const url='https://jsonplaceholder.typicode.com/posts';
          // const url = 'https://google.com'; // doesn't work due to some CORS issue
          Http.open("GET", url);
          Http.send();
          Http.onreadystatechange = (e) => {
            var truncatedResponseText = Http.responseText.substring(0, 15); // limit the number of characters the computer has to render so it doesn't overload
            var el = this.el;
            el.setAttribute("text-geometry", "value: " + truncatedResponseText);
          };
        }
      });
    </script>
</head>
<body>
  <a-scene id="scene">
    <a-assets>
      <!-- <a-asset-item id="optimerBoldFont" src="https://rawgit.com/mrdoob/three.js/dev/examples/fonts/optimer_bold.typeface.json"></a-asset-item> -->
      <a-asset-item id="duck" src="{{ url_for('static', filename='scene.gltf') }}"></a-asset-item>
      <!-- duck asset created by patspet, https://sketchfab.com/3d-models/baby-duck-a33f6e51b82f48c6b5e318d48ad1e2c7. Commercial use allowed, must credit author. -->
    </a-assets>
    <!-- <a-sky color="#65dbc8"></a-sky> -->

    <a-entity position="0 0.6 0" rotation="0 0 0">
      <a-entity camera look-controls wasd-controls="fly:false">
        <a-cursor></a-cursor>
      </a-entity>
    </a-entity>
    <a-entity environment="preset: forest; lightPosition: 1.2 1 3"><a-entity>
    <a-entity id="chatbot" position="0 0.25 -1" >
      <a-entity gltf-model="#duck" rotation="0 90 0"></a-entity>
      <a-entity text-geometry="value: What's upDog?" position="0 1 -4" color="#ff0000" look-at="[camera]"></a-entity>
      <a-entity id="response" color="#ffffff" position="0.1 4 -3" request-response></a-entity>
    </a-entity>
  </a-scene>

</body>
</html>